{
	"layers": [
		{
			"id": 0,
			"name": "Default",
			"keys": [
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoNum1"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoNum1"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoNum2"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoNum2"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoS1"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoS1"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoTL"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoTL"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoPL"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoPL"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoHL"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoHL"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoStar1"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoStar1"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoStar2"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoStar2"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoFR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoFR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoPR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoPR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoLR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoLR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoTR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoTR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoDR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoDR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoS2"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoS2"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoKL"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoKL"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoWL"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoWL"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoRL"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoRL"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoRR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoRR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoBR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoBR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoGR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoGR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoSR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoSR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoZR"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoZR"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoA"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoA"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoO"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoO"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoE"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoE"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "p",
								"c": "stenoU"
							}
						}
					},
					{
						"t": "r",
						"d": {
							"a": {
								"t": "r",
								"c": "stenoU"
							}
						}
					}
				],
				[
					{
						"t": "p",
						"d": {
							"a": {
								"t": "s",
								"script": "// Toggle Steno\n// B Button on the Asterisk\nif (getParameter(\"steno_mode\") != \"embedded\") {\n  console(\"set_steno_mode embedded\");\n  flashTimerDuration = 1000;\n} else {\n  console(\"set_steno_mode gemini\");\n  flashTimerDuration = 500;\n}\nflashTimerStart = getTime();\nstartTimer(TIMER_ID_LED_FLASH, 50, 1, @onLedFlashTimer);\nreleaseAll();"
							}
						}
					}
				]
			],
			"scripts": {},
			"user_scripts": {},
			"options": {
				"Enable individual keys in Key Layout tool": "true"
			},
			"sequences": {}
		}
	],
	"global": {
		"scripts": [],
		"layer": {
			"id": -1,
			"name": "Global",
			"keys": [
				null,
				null,
				[],
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null,
				null
			],
			"scripts": {
				"releaseStenoKey": "releaseStenoKeyAndUpdateLed",
				"pressStenoKey": "pressStenoKeyAndUpdateLed",
				"init": "flashTimerDuration = 1000;\nflashTimerStart = getTime();\nstartTimer(TIMER_ID_LED_FLASH, 50, 1, @onLedFlashTimer);",
				"header": "const TIMER_ID_LED_FLASH = 0;\nconst LED_PIN = 26;\n\nvar flashTimerStart;\nvar flashTimerDuration;\n",
				"activateLayer": "setEnableButtonStates(#flag(per_layer, \"Enable individual keys in Key Layout tool\", false));\n"
			},
			"user_scripts": {
				"pressStenoKeyAndUpdateLed": "func pressStenoKeyAndUpdateLed(x) {\n  pressStenoKey(x);\n  updateLed();\n}",
				"releaseStenoKeyAndUpdateLed": "func releaseStenoKeyAndUpdateLed(x) {\n  releaseStenoKey(x);\n  updateLed();\n}",
				"updateLed": "func updateLed() {\n  if (isTimerActive(TIMER_ID_LED_FLASH)) return;\n\n  if (checkButtonState(\"00000000000000000000000000\")) {\n    setGpioPin(LED_PIN, 0);\n  } else{\n    setGpioPinDutyCycle(LED_PIN, 5);\n  }\n}",
				"onLedFlashTimer": "func onLedFlashTimer() {\n  var now = getTime();\n  var elapsed = now - flashTimerStart;\n  if (elapsed >= flashTimerDuration) {\n    stopTimer(TIMER_ID_LED_FLASH);\n    updateLed();\n  } else {\n    // Toggle between 0 and 10 every 250ms.\n    setGpioPinDutyCycle(LED_PIN, 10 * !((elapsed/250) & 1));\n  }\n}"
			},
			"options": {},
			"sequences": {}
		}
	}
}