{"layers":[{"id":0,"name":"Default","keys":[[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoNum1"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoNum1"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoNum2"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoNum2"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoS1"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoS1"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoTL"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoTL"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoPL"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoPL"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoHL"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoHL"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoStar1"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoStar1"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoStar2"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoStar2"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoFR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoFR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoPR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoPR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoLR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoLR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoTR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoTR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoDR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoDR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoS2"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoS2"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoKL"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoKL"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoWL"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoWL"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoRL"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoRL"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoRR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoRR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoBR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoBR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoGR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoGR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoSR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoSR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoZR"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoZR"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoA"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoA"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoO"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoO"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoE"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoE"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"press","scan-code":"stenoU"}}},{"type":"release","activation":{"action":{"type":"release","scan-code":"stenoU"}}},{"type":"script","activation":{"script":"","press":"updateLed();","release":"updateLed();"}}],[{"type":"press","activation":{"action":{"type":"script","script":"if (getParameter(\"steno_mode\") != \"embedded\") {\n  console(\"set_steno_mode embedded\");\n  flashTimerDuration = 1000;\n} else {\n  console(\"set_steno_mode gemini\");\n  flashTimerDuration = 500;\n}\nflashTimerStart = getTime();\nstartTimer(TIMER_ID_LED_FLASH, 50, 1, @onLedFlashTimer);\nreleaseAll();"}}},{"type":"script","activation":{"script":"const TIMER_ID_LED_FLASH = 0;\nconst LED_PIN = 26;\n\nvar flashTimerStart;\nvar flashTimerDuration;\n\nfunc init() {\n  flashTimerDuration = 1000;\n  flashTimerStart = getTime();\n  startTimer(TIMER_ID_LED_FLASH, 50, 1, @onLedFlashTimer);\n}\n\nfunc onLedFlashTimer() {\n  var now = getTime();\n  var elapsed = now - flashTimerStart;\n  if (elapsed >= flashTimerDuration) {\n    stopTimer(TIMER_ID_LED_FLASH);\n    updateLed();\n  } else {\n    setGpioPinDutyCycle(LED_PIN, 10 * !((elapsed/250) & 1));\n  }\n}\n\nfunc updateLed() {\n  if (isTimerActive(TIMER_ID_LED_FLASH)) return;\n\n  if (checkButtonState(\"00000000000000000000000000\")) {\n    setGpioPin(LED_PIN, 0);\n  } else{\n    setGpioPinDutyCycle(LED_PIN, 5);\n  }\n}","press":"","release":""}}]]}]}